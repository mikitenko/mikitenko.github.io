(function(y){function e(a){this.ctx=a;this.element=a.element;this.id=this.element.getAttribute("id");this.readyCallback=null;this.id=this.id?this.id:R8.newUID();this.state="R8_DORMANT";this.visibleState=!0;this.locationInfo=this.settings=null;this.currentLocations=[];this.currentContent=[];this.currentTheme=null;this.sceneContexts={};this.cacheForLocations={};this.currentWindowSize={width:window.innerWidth};this.overlayIndex=2147483647;this.workflow=[];this.optimizeFullState=this.supportsPassiveEvents=
this.supportsExpandable=this.launchExpanded=!1;this._loadstate=-1;this.locationCode=null;this.showCounts=0;this.currentUserSettings={};this.originalUserSettings={};this.userAllowedLocation=this._locationBusy=!1;this.isMobile=null;this.getId=function(){return this.id};this.onLoad=function(a){a=a||{};var c=this;try{var d=Object.defineProperty({},"passive",{get:function(){c.supportsPassiveEvents=!0}});window.addEventListener("checkPassiveEvent",null,d);window.removeEventListener("checkPassiveEvent",
null,d)}catch(f){}c.readyCallback=a.callback;if(this.ctx.displaySlugId){if(!this.definedAttributes){c.settings=this.ctx.extraAttributes;try{c.loadComplete()}catch(f){console.log("[Welcomer] Load Issue: ",f)}}}else c.loadFailed({reason:"Missing Display Id"});return{handles_callbacks:!0}}}function w(a){if(!a.smart_metadata||!R8.hasValue(a.smart_metadata.attributes))return null;var b=0;R8.each(a.smart_metadata.attributes,function(a,d){if(0==a.indexOf("sort:")){try{b=parseFloat(a.split(":")[1])}catch(f){}return{breakout:!0}}});
return b}function x(a,b){var c=b.event;"R8_CALL"==c?a.addEventLog({type:"user_action",event_id:"call"}):"R8_NAVIGATION"==c?a.addEventLog({type:"user_action",event_id:"navigation"}):"R8_EMAIL"==c?a.addEventLog({type:"user_action",event_id:"email"}):"R8_OPEN_SHOPLOCAL"==c?a.addEventLog({type:"user_action",event_id:"open_shoplocal"}):"R8_OPEN_LOCATOR"==c?a.addEventLog({type:"user_action",event_id:"open_locator"}):"R8_CURRENT_GEO_LOCATION"==c?a.addEventLog({type:"user_action",event_id:"current_geo_location"}):
"R8_SHARE_LOCATION"==c?a.addEventLog({type:"user_action",event_id:"share_location"}):"R8_SHARE_LOCATION_END"==c?a.addEventLog({type:"user_action",event_id:"share_location_source"}):"R8_CHANGE_LOCATION"==c&&a.addEventLog({type:"user_action",event_id:"change_location",data:{store_code:b.location_code}})}function z(a,b,c,d){var f=a.name,h=a.id;a=a.settings;c.scene={};c.scene.id=h;c.scene.name=f;var g=A(b,c);b[h]||(b[h]=R8.compileTemplate({content:a?a.layout:""}));var e=function(){var a={context:g.context,
waitForCallback:!1,callback:function(){b.sceneContexts[h]=g.context;d({content:R8.renderTemplate({template:b[h],model:g})})}};R8.callIfExists(b,"onLoadScene_"+f,a);a.waitForCallback||a.callback()};b["initSceneRender_"+f]?R8.callIfExists(b,"initSceneRender_"+f,{context:g.context,callback:function(){e()}}):e()}function A(a,b){try{var c={context:{plugin:a,pluginId:a.getId()}},d=c.context;c.context.is_gps=a.isLocationGPS();c.context.is_mobile=a.isMobileDevice();c.context.share_location_enabled=a.isShareLocationEnabled();
c.context.share_location_available=a.isShareLocationAvailable();c.context.share_location_available_mobile=a.isShareLocationAvailableMobile();if(b)for(var f in b)d[f]=b[f]}catch(h){console.log("[Welcomer] Issue",h)}return c}function B(){var a=R8.getCookie({key:"r8d"});return a&&""!=a?a:null}function C(a){R8.each(a,function(a,c){a.store_code&&(a.location_code=a.store_code);var d=R8Utils.getTodayStoreHours(a);d&&(a.todaysHours=d)})}function D(a,b){b=b||{};var c=b.type,d=b.unique?b.unique:["type"],f=
b.data,h=0<d.length;if(a&&f&&c){var g="__analytics"+c;h&&R8.each(d,function(a,c){f[a]?g+="_"+f[a]:b[a]&&(g+="_"+f[a])});R8.debug("sendAnalytics["+c+"]["+d+"]("+(void 0!=a[g])+")");if(!h||!a[g])try{var e=(new Date).getTime()-R8.getLoadedAt(),k=f.store_code?f.store_code:R8Services.getActiveLocation()?R8Services.getActiveLocation().location_code:null,n={type:c,store_code:k,source:"welcomer",lead_time:e,slug_id:a.ctx?a.ctx.displaySlugId:null,user_device_id:B()};f&&R8.each(f,function(a,b){n[b]=a});h&&
(a[g]=!0);R8.Analytics.capture(n)}catch(r){R8.debug(r)}}else R8.debug("sendAnalytics - missing ["+!a+"]["+!f+"][("+!c+")]")}function E(a){a=a||{};var b=a.target.split(":");a=a.layout;var c=null,d=b[0],f=b[1],b=b[2],h=null;"id"==d?h=document.getElementById(f):"className"==d?h=F({className:f,layout:a}):"tag"==d&&(d=document.getElementsByTagName(f))&&0<d.length&&(h=d[0]);h&&("bottom"==b?c=h.appendChild(a):"top"==b&&(c=h.insertBefore(a,h.firstChild)));return c}function F(a){a=a||{};var b=[],c=a.className;
return c&&(document.getElementsByClassName?b=document.getElementsByClassName(c):(a=document.getElementsByTagName("*"),R8.each(a,function(a,f){if(a.className&&a.className==c)return b.push(a),{breakout:!0}})),b&&0<b.length)?b[0]:null}window.R8Welcomer||(window.R8Welcomer={},e.prototype._firstShow=function(){var a=this,b=a.settings.auto_hide;b&&setTimeout(function(){R8.callIfExists(a,"onHandleAutoHide",{})||a.isVisible()&&R8.PubSub.publish({name:a.getId(),event:"R8_HIDE"})},1E3*b);a._saveState({reason:"shown"})},
e.prototype.isVisible=function(){return this.visibleState},e.prototype.isShareLocationAvailable=function(){return this.isShareLocationEnabled()&&!this.isLocationGPS()},e.prototype.isShareLocationAvailableMobile=function(){return this.isShareLocationAvailable()&&this.isMobileDevice()},e.prototype.isMobileDevice=function(){return R8.hasValue(this.isMobile)?this.isMobile:this.isMobile=R8.getDeviceInfo().isMobile},e.prototype.isShareLocationEnabled=function(a){return R8.hasValue(this.settings.preferences.share_location_enabled)?
this.settings.preferences.share_location_enabled:!0},e.prototype.userShareLocation=function(a){a=a||{};var b=this,c=a.callback;a=a.user_allowed_once||!1;b.isShareLocationEnabled()?b.isLocationGPS()?c&&c({}):b._locationBusy||(b._locationBusy=!0,R8.PubSub.publish({name:b.getId(),event:"R8_SHARE_LOCATION_START"}),a||(b.currentUserSettings.ual=!0,b.userAllowedLocation=b.currentUserSettings.ual),b.getCurrentLocation({refresh:!0,user_allowed_once:a,callback:function(){R8.PubSub.publish({name:b.getId(),
event:"R8_SHARE_LOCATION_END"});b._saveUserSettings();b.reload({callback:c})}})):c&&c({})},e.prototype.getNearestLocations=function(a){var b=this;this.getCurrentLocation({callback:function(){a.limit=b.settings.nearest_location_limit?b.settings.nearest_location_limit:1;a.radius=b.settings.nearest_location_radius?b.settings.nearest_location_radius:30;b._queryLocations(a)}})},e.prototype._queryLocations=function(a){var b=this,c=a.callback,d=[];c||(c=function(){});var f=a.location_code,h=void 0!=a.set_current?
a.set_current:!0,g=a.geo_point?a.geo_point:this.locationInfo.geo_point,e=a.location_codes,k={lat:g.lat,lng:g.lng,radius:void 0!=a.radius&&0!=a.radius?a.radius:100,units:"MI",limit:void 0!=a.limit&&0!=a.limit?a.limit:20};e&&0<e.length&&(k={lat:g.lat,lng:g.lng,units:"MI",store_codes:e});a.query&&(k.query=a.query);a.tags&&(k.tags=a.tags);a.divisions&&(k.divisions=a.divisions);f&&(k.store_codes=[f]);R8.PubSub.publish({name:b.getId(),event:"R8_BEFORE_QUERY_LOCATIONS",parameters:k});R8.debug("R8Welcomer.queryLocations: ",
k);d=[];R8Services.readStoreStream({params:k,callback:function(a){a.success&&(d=a.data.results);C(d);h&&(b.currentLocations=d);b.currentLocations&&0<b.currentLocations.length&&R8Services.setActiveLocation(b.currentLocations[0]);c({plugin:b,success:a.success,locations:d})}})},e.prototype.loadFailed=function(a){},e.prototype._saveUserSettings=function(a){var b=this.originalUserSettings;a=this.currentUserSettings;var c=!1,d=this.settings.preferences||{};try{if(R8.each(a,function(a,d){if(void 0==b[d]||
b[d]!=a)return c=!0,{breakout:!0}}),c){var f={key:"wlcus"+this.runtimeId,data:a};d.share_location_expires||(d.share_location_expires="7d");if("session"==d.share_location_expires)try{R8.deviceStorage.setData(f),R8.debug("Saving Perfs "+d.share_location_expires)}catch(e){console.log("[Welcomer] Save Issue: ",e)}else{var h=d.share_location_expires.substring(d.share_location_expires.length-1),g=parseInt(d.share_location_expires.replace(h,""));"h"==h?f.expiresInMinutes=60*g:"d"==h?f.expiresInDays=g:"m"==
h&&(f.expiresInMinutes=g);R8.deviceStorage.setData(f);R8.debug("Saving Perfs "+d.share_location_expires)}}}catch(e){console.log("[Welcomer] Save Issue: ",e)}},e.prototype._saveState=function(a){var b=this.launching;if(b&&b.state&&b.expires&&a.reason&&("hidden"==a.reason&&"ah"==b.state||"user_closed"==a.reason&&"uc"==b.state||"shown"==a.reason&&"so"==b.state))if(a={key:"wlc"+this.runtimeId,data:{ls:b.state,a:"dl"}},"session"==b.expires)try{R8.deviceStorage.setData(a)}catch(d){console.log(d)}else{var c=
b.expires.substring(b.expires.length-1),b=parseInt(b.expires.replace(c,""));"h"==c?a.expiresInMinutes=60*b:"d"==c?a.expiresInDays=b:"m"==c&&(a.expiresInMinutes=b);R8.deviceStorage.setData(a)}},e.prototype.loadComplete=function(){var a=this,b=a.getId();a.workflow=this.settings.flow;a.launching=this.settings.launching;a.runtimeId=R8.Utils.hashid({encodeText:a.ctx.displaySlugId,size:4});a.nameId=a.ctx.displaySlugId;0==a.ctx.displaySlugId.indexOf("r8preview_")&&(a.runtimeId="preview_welcomer",a.nameId=
a.ctx.displaySlugId.split("_"),a.nameId=a.nameId.slice(2,a.nameId.length).join("_"));a.settings.preferences||(a.settings.preferences={});a.originalUserSettings=R8.deviceStorage.getData({key:"wlcus"+a.runtimeId});a.originalUserSettings||(a.originalUserSettings={});a.currentUserSettings=R8.toCopy(a.originalUserSettings);a.userAllowedLocation=R8.hasValue(a.currentUserSettings.ual)?a.currentUserSettings.ual:!1;a.isShareLocationEnabled()||(a.userAllowedLocation=!1);R8.debug("[Welcomer] User Location: "+
a.userAllowedLocation);var c=R8.deviceStorage.getData({key:"wlc"+a.runtimeId});if(a.launching.state&&(c&&c.ls!=a.launching.state&&(R8.deviceStorage.removeData({key:"wlc"+a.runtimeId}),c=null),c&&"dl"==c.a))return;var d=null;this.resizeListener=function(){try{var b=R8.getDeviceInfo().isMobile?250:30;d&&clearTimeout(d);d=setTimeout(function(){a.onWindowSizeChange({dimensions:{width:window.innerWidth}});d=null},b)}catch(c){R8.debug(c)}};c=document.createElement("style");c.type="text/css";c.styleSheet?
c.styleSheet.cssText=".r8-welcomer{display:block;clear:both;position:relative;pointer-events:all;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.r8-welcomer\x3ediv{box-sizing:border-box}.r8-welcomer-pos-embed{position:relative;width:100%}.r8-welcomer-pos-topc{position:fixed;top:0;left:50%;transform:translateX(-50%);margin-left:auto;margin-right:auto}.r8-welcomer-pos-topfw{position:fixed;top:0;left:0;right:0;width:100%}.r8-welcomer-pos-topl{position:fixed;top:0;left:0}.r8-welcomer-pos-topr{position:fixed;top:0;right:0}.r8-welcomer-pos-bottomc{position:fixed;left:50%;bottom:0;transform:translateX(-50%);margin-left:auto;margin-right:auto}.r8-welcomer-pos-bottomfw{position:fixed;bottom:0;left:0;right:0;width:100}.r8-welcomer-pos-bottoml{position:fixed;bottom:0;left:0}.r8-welcomer-pos-bottomr{position:fixed;bottom:0;right:0}.r8-welcomer-trans-slideinr\x3ediv{-webkit-animation:R8WA-slideInRight 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInRight 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInRight 1s cubic-bezier(.16,.81,.32,1) both}.r8-welcomer-trans-slideinl\x3ediv{-webkit-animation:R8WA-slideInLeft 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInLeft 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInLeft 1s cubic-bezier(.16,.81,.32,1) both}.r8-welcomer-trans-slideind\x3ediv{-webkit-animation:R8WA-slideInDown 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInDown 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInDown 1s cubic-bezier(.16,.81,.32,1) both}.r8-welcomer-trans-slideinu\x3ediv{-webkit-animation:R8WA-slideInUp 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInUp 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInUp 1s cubic-bezier(.16,.81,.32,1) both}@-moz-keyframes R8WA-slideInRight{from{opacity:1;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInRight{from{opacity:0;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInRight{from{opacity:1;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInRight{from{opacity:1;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-moz-keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-moz-keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-moz-keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}.r8-welcomer-close{position:absolute;right:20px;top:10px;padding:0;opacity:1;cursor:pointer;outline:0;height:10px;width:10px;background:url(https://d1jtvsnyw30b9e.cloudfront.net/spaces/platform/media/close.png?v\x3d1) center center/cover}":
c.appendChild(document.createTextNode(".r8-welcomer{display:block;clear:both;position:relative;pointer-events:all;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.r8-welcomer\x3ediv{box-sizing:border-box}.r8-welcomer-pos-embed{position:relative;width:100%}.r8-welcomer-pos-topc{position:fixed;top:0;left:50%;transform:translateX(-50%);margin-left:auto;margin-right:auto}.r8-welcomer-pos-topfw{position:fixed;top:0;left:0;right:0;width:100%}.r8-welcomer-pos-topl{position:fixed;top:0;left:0}.r8-welcomer-pos-topr{position:fixed;top:0;right:0}.r8-welcomer-pos-bottomc{position:fixed;left:50%;bottom:0;transform:translateX(-50%);margin-left:auto;margin-right:auto}.r8-welcomer-pos-bottomfw{position:fixed;bottom:0;left:0;right:0;width:100}.r8-welcomer-pos-bottoml{position:fixed;bottom:0;left:0}.r8-welcomer-pos-bottomr{position:fixed;bottom:0;right:0}.r8-welcomer-trans-slideinr\x3ediv{-webkit-animation:R8WA-slideInRight 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInRight 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInRight 1s cubic-bezier(.16,.81,.32,1) both}.r8-welcomer-trans-slideinl\x3ediv{-webkit-animation:R8WA-slideInLeft 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInLeft 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInLeft 1s cubic-bezier(.16,.81,.32,1) both}.r8-welcomer-trans-slideind\x3ediv{-webkit-animation:R8WA-slideInDown 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInDown 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInDown 1s cubic-bezier(.16,.81,.32,1) both}.r8-welcomer-trans-slideinu\x3ediv{-webkit-animation:R8WA-slideInUp 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:R8WA-slideInUp 1s cubic-bezier(.16,.81,.32,1) both;animation:R8WA-slideInUp 1s cubic-bezier(.16,.81,.32,1) both}@-moz-keyframes R8WA-slideInRight{from{opacity:1;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInRight{from{opacity:0;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInRight{from{opacity:1;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInRight{from{opacity:1;-webkit-transform:translate3d(-300px,0,0);transform:translate3d(-300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-moz-keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInLeft{from{opacity:1;-webkit-transform:translate3d(300px,0,0);transform:translate3d(300px,0,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-moz-keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInDown{from{opacity:1;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-moz-keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-webkit-keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@-o-keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes R8WA-slideInUp{from{opacity:1;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}.r8-welcomer-close{position:absolute;right:20px;top:10px;padding:0;opacity:1;cursor:pointer;outline:0;height:10px;width:10px;background:url(https://d1jtvsnyw30b9e.cloudfront.net/spaces/platform/media/close.png?v\x3d1) center center/cover}"));
a.element.appendChild(c);var c=document.createElement("style"),f=this.settings.styles;c.type="text/css";c.styleSheet?c.styleSheet.cssText=f:c.appendChild(document.createTextNode(f));a.element.appendChild(c);c=this.settings.behavior_script;f=document.createElement("script");f.type="text/javascript";f.text="(function(context){\n"+c+"\n})({plugin: R8Plugins.getPluginById('"+b+"')});";a.element.appendChild(f);this.messageHandler=function(b){a.onHandleWelcomerMessage(b)};R8.PubSub.subscribe(a.getId(),
this.messageHandler);R8.PubSub.publish({name:a.getId(),event:"R8_MOUNTED"});if(a._checkForRuntimeSupport()){b=this.settings.experience;if("expand_min"==b||"expand_max"==b)a.supportsExpandable=!0,a.launchExpanded="expand_max"==b;a._addResizeEvent();R8.PubSub.publish({name:a.getId(),event:"R8_LOADED"})}else R8.PubSub.publish({name:a.getId(),event:"R8_DEVICE_UNSUPPORTED"})},e.prototype._addResizeEvent=function(){if(this.supportsPassiveEvents)try{window.addEventListener("resize",this.resizeListener,{passive:!0});
return}catch(a){this.supportsPassiveEvents=!1}R8.addEventListener(window,"resize",this.resizeListener)},e.prototype._removeResizeEvent=function(){this.supportsPassiveEvents?window.removeEventListener("resize",this.resizeListener,{passive:!0}):R8.removeEventListener(window,"resize",this.resizeListener)},e.prototype._checkForRuntimeSupport=function(){var a=R8.callIfExists(this,"onHandleDeviceSupport",{});return R8.hasValue(a)?a:!0},e.prototype._checkForLocationSupport=function(){var a=R8.callIfExists(this,
"onHandleLocationSupport",{location_info:this.locationInfo});return R8.hasValue(a)?a:!0},e.prototype.onDestroy=function(){this.optimizeFullWindowOverlay({enable:!1});this._removeResizeEvent();R8.PubSub.unsubscribe(this.getId())},e.prototype.isLocationGPS=function(a){return this.locationInfo&&this.locationInfo.geo_source?"gps"==this.locationInfo.geo_source:!1},e.prototype.getCurrentLocation=function(a){a=a||{};var b=this,c=a.callback,d=a.user_allowed_once||!1;void 0==a.refresh&&(a.refresh=!1);if(this.locationInfo&&
!a.refresh)c&&c(this.locationInfo);else{a=null;R8.getDeviceInfo().isMobile&&(a=this.settings.geo_strategy_mobile);a&&0!=a.length||(a=this.settings.geo_strategy);a&&0!=a.length||(a=["current","cached","geocoding_ip"]);if(b.userAllowedLocation||d)d=!1,this.locationInfo||(a=R8.deviceStorage.getData({key:"gp"}))&&(d=R8.hasValue(a.gs)?"gps"==a.gs:!1),a=d?["current","cached","geolocation","geocoding_ip"]:["geolocation","geocoding_ip"],R8.debug("[Welcomer] Geo: "+a);R8.geoLocation({callback:function(a){a.success&&
(b.locationInfo={geo_point:{lat:a.lat,lng:a.lng},geo_source:a.geo_source},b.locationInfo.geo_info=R8.getGeoInfo(),b._checkForLocationSupport()?c&&c(b.locationInfo):R8.PubSub.publish({name:b.getId(),event:"R8_LOCATION_UNSUPPORTED"}))},strategy:a})}},e.prototype._nextFlow=function(){var a=this,b=a._loadstate,c=null;if(b<a.settings.flow.length){try{if(c=a.settings.flow[b]){var d=function(){a._loadstate++;a._nextFlow()},f={name:c,continue_flow:!0};if("theme"==c){a.readTheme({callback:function(){a.currentTheme||
(f.continue_flow=!1,R8.PubSub.publish({name:a.getId(),event:"R8_FLOW_NO_RESULTS",flow:f}));f.continue_flow&&d()}});return}if("locations"==c){a.readLocations({location_code:a.locationCode,callback:function(){a.currentLocations&&0!=a.currentLocations.length||(f.continue_flow=!1,R8.PubSub.publish({name:a.getId(),event:"R8_FLOW_NO_RESULTS",flow:f}));f.continue_flow&&d()}});return}if("smartcontent"==c){a.loadContentCards({refresh_cards:!1,callback:function(){a.currentContent&&0!=a.currentContent.length||
(f.continue_flow=!1,R8.PubSub.publish({name:a.getId(),event:"R8_FLOW_NO_RESULTS",flow:f}));f.continue_flow&&d()}});return}if("ready"==c){R8.PubSub.publish({name:a.getId(),event:"R8_READY",callback:d});return}}}catch(e){console.log(e)}R8.PubSub.publish({name:a.getId(),event:"R8_FLOW_ISSUE",index:b,name:c})}a._flowCallback&&a._flowCallback();a._flowCallback=null},e.prototype.loadContentCards=function(a){a=a||{};var b=a.callback,c=R8.hasValue(a.refresh_cards)?a.refresh_cards:!0,d=this;d.readContent({callback:function(a){c?
d.refreshCards({callback:function(){R8Plugins.refreshViews();b&&b(a)}}):b&&b(a)}})},e.prototype.contentToCardBody=function(a){if(a=a.data.content){var b={context:{location:null}};this.currentLocations&&0<this.currentLocations.length&&(b.context.location=this.currentLocations[0]);a=R8.trim(a);a=R8.renderTemplate({content:a,model:b})}return a},e.prototype.findCardId=function(a){a=a.source;var b=null;a&&R8.domUp(a,function(a){return a.getAttribute&&a.getAttribute("data-r8-card-id")?(b=a.getAttribute("data-r8-card-id"),
!1):!0});return b},e.prototype.hideCard=function(a){var b=a.source;a=a.id;b?(a=this.findCardId({source:b}))&&this.hideCard({id:a}):a&&(b=document.getElementById(a))&&(b.style.display="none")},e.prototype.addCard=function(a){a=a||{};var b=this,c="",d="",f=a.callback;try{a.data&&(d=a.data.content_id,c=a.data.content_type);b.getId();var e=b.elementCardsContainer,d="r8_content_card_"+d;if(e&&a.data){var g=document.createElement("div");g.className="r8-content-card r8-content-type-"+c;g.id=d;g.setAttribute("data-r8-card-id",
d);e.appendChild(g);var l=a.data,k={content_id:l.content_id,content_name:l.content_name,content_type:l.content_type,smart_metadata:l.smart_metadata,group_id:l.group_id};R8.addEventListener(g,"click",function(){R8.PubSub.publish({name:b.getId(),event:"R8_CARD_CLICK",element:g,data:k})});R8Plugins.createPlugins({type:"content_card_"+c,onAllPluginsReady:function(c){if(c.plugins&&0!=c.plugins.length){c=c.plugins[0].instance;var d=null;b.currentLocations&&0<b.currentLocations.length&&(d=b.currentLocations[0]);
c.renderToElement({parent:b,contentData:a.data,element:g,location:d,callback:function(){f&&f({success:!0});R8.PubSub.publish({name:b.getId(),event:"R8_CARD_LOADED",element:g,data:k})}})}else f&&f({success:!1})}})}}catch(n){f&&f({success:!1}),R8.debug(n)}},e.prototype.clearCards=function(a){this.elementCardsContainer&&(this.elementCardsContainer.innerHTML="")},e.prototype.refreshCards=function(a){var b=this,c=this.getId(),d=a.callback,f=0,e=b.currentContent.length;b.currentContent&&0!=e?(b.clearCards(),
R8.PubSub.publish({name:c,event:"R8_LOADING_CARDS_START"}),b.elementCardsContainer&&b.currentContent&&R8.each(b.currentContent,function(a,l){b.addCard({data:a,callback:function(a){f++;f==e&&(R8.PubSub.publish({name:"R8_CREATE_PLUGINS",container_id:b.elementCardsContainer.id,with_content:!0,callback:function(a){R8.each(a.plugins,function(a,c){var d=a.instance;if(d.onConnect)d.onConnect(b)})}}),R8.PubSub.publish({name:c,event:"R8_LOADING_CARDS_END",count:f}),d&&d())}})}),0==e&&R8.PubSub.publish({name:c,
event:"R8_LOADING_CARDS_END",count:0})):d&&d()},e.prototype.readTheme=function(a){var b=this;b.getCurrentLocation({callback:function(){b._readThemeInternal(a)}})},e.prototype._readThemeInternal=function(a){R8.PubSub.publish({name:this.getId(),event:"R8_THEME_REQUEST"});var b=this,c=a.callback,d=R8.hasValue(this.currentLocations)?this.currentLocations:[];a={content_types:["welcomer_theme"]};a.time=encodeURIComponent(R8.Utils.moment().format());a.time_zone=encodeURIComponent(R8.Utils.moment().format("Z"));
a.limit=1;var f=b.locationInfo.geo_point,e=b.locationInfo.geo_info;R8.hasValue(f)&&(a.lat=f.lat,a.lng=f.lng);R8.hasValue(e)&&(R8.hasValue(e.geo_ids)&&0<e.geo_ids.length&&(a.geo_ids=e.geo_ids),a.postal_codes=[e.postal_code],a.state_codes=[e.region_code],a.country_code=[e.country_code]);0<d.length?(a.location_codes=[d[0].store_code],a.distance=d[0].geo_distance.distance):a.distance=5E4;d=b.settings.smartcontent_channel;R8.hasValue(d)&&""!=d&&(a.channel=d);a.channel?R8Services.readContentStream({params:a,
callback:function(a){if(a.success&&0<a.data.results.length){a=a.data.results[0];try{b.currentTheme=JSON.parse(a.content)}catch(d){console.log("[WARN] Welcomer Theme Issue: "+d)}}R8.PubSub.publish({name:b.getId(),event:"R8_THEME_RESPONSE"});c&&c()}}):(R8.PubSub.publish({name:b.getId(),event:"R8_THEME_RESPONSE"}),c&&c())},e.prototype.readContent=function(a){R8.PubSub.publish({name:this.getId(),event:"R8_CONTENT_REQUEST"});var b=this,c=this.settings.smartcontent_tags,d=this.settings.smartcontent_attributes,
f=this.settings.smartcontent_limit,e=this.settings.smartcontent_groups,g=this.settings.smartcontent_channel,l=R8.hasValue(this.currentLocations)?this.currentLocations:[],k=a.callback,n={};a={content_types:["promotion","message","event","display","social_media_widget"]};a.time=encodeURIComponent(R8.Utils.moment().format());a.time_zone=encodeURIComponent(R8.Utils.moment().format("Z"));R8.hasValue(c)&&0<c.length&&(a.tags=c);R8.hasValue(d)&&0<d.length&&(a.attributes=d);R8.hasValue(e)&&0<e.length&&(a.group_ids=
e);R8.hasValue(g)&&""!=g&&(a.channel=g);R8.hasValue(f)&&0<f?a.limit=f:a.limit=1;c=b.locationInfo.geo_point;d=b.locationInfo.geo_info;R8.hasValue(c)&&(a.lat=c.lat,a.lng=c.lng);R8.hasValue(d)&&(R8.hasValue(d.geo_ids)&&0<d.geo_ids.length&&(a.geo_ids=d.geo_ids),a.postal_codes=[d.postal_code],a.state_codes=[d.region_code],a.country_code=[d.country_code]);0<l.length?(a.location_codes=[l[0].store_code],a.distance=l[0].geo_distance.distance):a.distance=5E4;R8.PubSub.publish({name:b.getId(),event:"R8_BEFORE_QUERY_CONTENT",
parameters:a});R8Services.readContentStream({params:a,callback:function(a){b.currentContent=[];if(a.success)try{b.currentContent=a.data.results,b.currentContent.sort(function(a,b){var c=w(a),d=w(b);return(null===c)-(null===d)||+(c>d)||-(c<d)})}catch(c){}R8.PubSub.publish({name:b.getId(),event:"R8_CONTENT_RESPONSE"});k&&k(n)}})},e.prototype.readLocations=function(a){var b=this;R8.PubSub.publish({name:this.getId(),event:"R8_LOCATIONS_REQUEST"});0==b.settings.nearest_location_radius?(b.currentLocations=
[],R8.PubSub.publish({name:this.getId(),event:"R8_LOCATIONS_RESPONSE"}),a.callback()):this.getNearestLocations({location_code:a.location_code,callback:function(c){b.currentLocations=c.locations;null!=b.currentLocations&&0!=b.currentLocations.length||R8.PubSub.publish({name:b.getId(),event:"R8_NO_LOCATIONS_FOUND"});R8.PubSub.publish({name:b.getId(),event:"R8_LOCATIONS_RESPONSE"});a.callback()}})},e.prototype.changeLocation=function(a){this.locationCode=a.location_code;R8.PubSub.publish({name:this.getId(),
event:"R8_LOADED"})},e.prototype.reload=function(a){var b=this;a=a||{};b._loadstate=0;b._flowCallback=a.callback;b.getCurrentLocation({callback:function(){b._nextFlow()}})},e.prototype.onHandleWelcomerMessage=function(a){var b=a.event,c=a.callback;try{if(R8.callIfExists(this,"onHandleEvents",a)){x(this,a);return}}catch(d){console.log("Warning 'onHandleEvents': "+d)}if("R8_LOADED"==b)this._changeState({state:b}),this.isVisible()&&this.reload(),this.readyCallback&&this.readyCallback();else if("R8_CHANGE_LOCATION"==
b)this.changeLocation({location_code:a.location_code});else if("R8_SHARE_LOCATION"==b){if(this._locationBusy)return;this.userShareLocation({})}else"R8_WELCOME"==b?this._changeState({state:"R8_WELCOME",callback:c}):"R8_READY"==b?this._changeState({state:"R8_READY",callback:c}):"R8_CLOSE"==b?(this._saveState({reason:"user_closed"}),this._changeState({state:b}),this.visible({visible:!1})):"R8_HIDE"==b?(this._changeState({state:b}),this.visible({visible:!1})):"R8_SHOW"==b?(this._changeState({state:b}),
this.visible({visible:!0})):"R8_EXPAND_FLIP"==b?R8.PubSub.publish({name:this.getId(),event:this.expandedState?"R8_COLLAPSE":"R8_EXPAND"}):"R8_EXPAND"==b?this.expand({expand:!0}):"R8_COLLAPSE"==b&&this.expand({expand:!1});x(this,a)},e.prototype._changeState=function(a){var b=a.state;a=a.callback;"R8_READY"==b?(this.state=b,R8.PubSub.publish({name:this.getId(),event:"R8_WELCOME",callback:a})):"R8_WELCOME"==b?this.showScene({name:"welcome",refresh:!0,state:b,callback:a}):this.state=b},e.prototype.getCurrentSceneId=
function(a){return this.sceneContexts.currentSceneId?this.sceneContexts.currentSceneId:""},e.prototype.getCurrentSceneIndex=function(a){return this.getCurrentSceneId()?(a=this.getCurrentSceneId().split("_"),parseInt(a[a.length-1])):0},e.prototype.onWindowSizeChange=function(a){try{if(a=a||{},this.isVisible()||a.state){var b=this.state,c=this,d=a.state,e=a.callback,h=R8.hasValue(a.refresh)?a.refresh:!1,g=this.sceneContexts.currentSceneName,l=a.dimensions.width;if(g&&""!=g){var k=this.sceneContexts.currentSceneId,
n=[];R8.each(c.settings.scenes,function(a,b){var c=a.res;b.split("_")[1]==g&&"none"!=c&&("any"==c&&(c="5000"),c=parseInt(c),n.push({id:b,name:g,screen_width:c,settings:a}))});n.sort(function(a,b){return a.screen_width-b.screen_width});var r=null;R8.each(n,function(a,b){if(l<=a.screen_width)return r=a,{breakout:!0}});if(null==r||r.id!=k||h)k&&!h&&(R8.PubSub.publish({name:this.getId(),event:"R8_SCENE_REMOVED"}),c.optimizeFullWindowOverlay({enable:!1})),null==r?(c.sceneContexts.currentSceneId=null,c._removeWelcomer(),
R8.PubSub.publish({name:c.getId(),event:"R8_NO_MATCHING_SCENE",scene_name:g})):(this.sceneContexts.currentSceneId=r.id,d&&(c.state=d),c.loadScene({scene:r,refresh:h,callback:function(a){"R8_READY"==b&&a.success&&c._firstShow(a);e&&e(a)}}))}}}catch(q){R8.debug(q)}},e.prototype._removeWelcomer=function(a){(a=document.getElementById(this.getId()+"_welcomer"))&&a.parentNode.removeChild(a)},e.prototype.loadScene=function(a){var b=this,c=a.scene,d=c.settings,e=c.name,h=a.model||{},g=b.getId(),l=a.callback,
k=d.mount_target,n=a.refresh;k&&""!=k||(k="element");h.location=null;h.content=null;h.theme=null;this.currentLocations&&0<this.currentLocations.length&&(h.location=this.currentLocations[0]);this.currentContent&&0<this.currentContent.length&&(h.content=this.currentContent[0]);h.theme=this.currentTheme;a=function(a){var q=a.content;a=c.id.split("_");var t=a[a.length-1],p="r8-welcomer-container-scene-"+t,u="r8-welcomer-scene-"+t,v=!1;a=function(){v||R8.callIfExists(b,"onSceneShow_"+e,{});l&&l({name:e,
success:!v})};var m=document.createElement("div");m.className="r8-welcomer r8-display-"+b.nameId+" "+p+" r8-welcomer-pos-"+d.placement+" r8-welcomer-trans-"+d.transin+" r8-welcomer-theme";m.id=g+"_welcomer";"embed"!=d.placement&&"custom"!=d.placement&&(m.style.zIndex=b.overlayIndex);(p=document.getElementById(m.id))&&p.parentNode.removeChild(p);p=document.createElement("div");p.className="r8-welcomer-scene "+u;p.id=g+"_welcomer_scene_"+t;p.innerHTML=q;m.style.display=b.isVisible()?"block":"none";
h.theme&&h.theme.styles&&(t=document.createElement("style"),u=R8.renderTemplate({content:h.theme.styles,model:{context:{theme:h.theme}}}),t.type="text/css",t.styleSheet?t.styleSheet.cssText=u:t.appendChild(document.createTextNode(u)),p.appendChild(t));p=m.appendChild(p);"body_bottom"==k?m=document.body.appendChild(m):"body_top"==k?document.body.insertBefore(m,document.body.firstChild):m=-1<k.indexOf(":")?E({target:k,layout:m}):b.element.appendChild(m);m?(b.elementWelcomerContainer=m,b.elementSceneContainer=
p,b.elementCardsContainer=document.getElementById(b.getId()+"_cards_container"),b.elementBodyContainer=document.getElementById(b.getId()+"_body_container"),b.elementHeaderContainer=document.getElementById(b.getId()+"_header_container"),b.triggerScrollOnce=!0,q&&(b.elementBodyContainer&&(q=function(a){a={plugin:b,event:a};R8.callIfExists(b,"onViewScroll",a);R8.callIfExists(b,"onHandleViewScroll",a);b.triggerScrollOnce&&(b.triggerScrollOnce=!1,R8.PubSub.publish({name:b.getId(),event:"R8_SCROLL_STARTED",
element:b.elementBodyContainer,data:{}}))},b.supportsPassiveEvents?b.elementBodyContainer.addEventListener("scroll",q,{passive:!0}):R8.addEventListener(b.elementBodyContainer,"scroll",q)),(q=document.getElementById(g+"_close"))&&R8.addEventListener(q,"click",function(){R8.PubSub.publish({name:g,event:"R8_CLOSE"});b.addEventLog({type:"user_action",event_id:"close"})}),b.supportsExpandable&&((q=document.getElementById(g+"_expand"))&&R8.addEventListener(q,"click",function(a){a=b.isExpanded();var c=R8.callIfExists(b,
"onHandleExpandClick",{is_expanded:a});if(void 0==c||c)R8.PubSub.publish({name:g,event:"R8_EXPAND_FLIP"}),a?b.addEventLog({type:"user_action",event_id:"collapse"}):b.addEventLog({type:"user_action",event_id:"expand"})}),n?R8.PubSub.publish({name:g,event:b.launchExpanded?"R8_EXPAND":"R8_COLLAPSE"}):R8.PubSub.publish({name:g,event:b.isExpanded()?"R8_EXPAND":"R8_COLLAPSE"}))),b.refreshCards({}),b.isVisible()&&b.addEventLog({type:"visible_impression"}),R8.callIfExists(b,"initScene_"+e,{callback:a}),b._locationBusy=
!1):(k?console.log("[R8] [Welcomer] cannot find element by '"+k+"' for mounting."):console.log("[R8] [Welcomer] cannot find element for mounting."),v=!0,a())};try{z(c,this,h,a)}catch(r){R8.debug(r)}},e.prototype.optimizeFullWindowOverlay=function(a){var b=this;setTimeout(function(){var c=a,c=c||{};try{c.enable?b.optimizeFullState=!0:b.optimizeFullState&&(b.optimizeFullState=!1)}catch(d){R8.debug(d)}},200)},e.prototype.isExpandable=function(){return this.supportsExpandable},e.prototype.isExpanded=
function(){return this.isExpandable()?this.expandedState:!0},e.prototype.slideViewTo=function(a){a=a||{};a=a.position;if(this.elementBodyContainer)try{a&&"top"==a&&this.elementBodyContainer.scrollTop&&(this.elementBodyContainer.scrollTop=0)}catch(b){}},e.prototype.setActiveHostScrollListener=function(a){var b=this;window.addEventListener&&!b.__activeHostScrollListener&&(b.__activeHostScrollListener=function(a){R8.callIfExists(b,"onHandleHostScroll",a)},window.addEventListener("scroll",b.__activeHostScrollListener,
{passive:!0}))},e.prototype.expand=function(a){a=a||{};if(this.supportsExpandable&&void 0!=a.expand&&null!=a.expand){var b=this.elementWelcomerContainer,c=this.elementSceneContainer;if(b&&c){var d=document.getElementById(this.getId()+"_handle_expand"),e=document.getElementById(this.getId()+"_handle_collapse");(this.expandedState=a.expand)?(this.elementCardsContainer&&(this.elementCardsContainer.style.display="block"),R8.Utils.elementCSS(b,"add","r8-welcomer-expand"),R8.Utils.elementCSS(b,"remove",
"r8-welcomer-collapse"),R8.Utils.elementCSS(c,"add","r8-welcomer-scene-expand"),R8.Utils.elementCSS(c,"remove","r8-welcomer-scene-collapse"),d&&(d.style.display="none"),e&&(e.style.display="block"),setTimeout(function(){R8Plugins.refreshViews()},1)):(this.slideViewTo({position:"top"}),R8.Utils.elementCSS(c,"add","r8-welcomer-scene-collapse"),R8.Utils.elementCSS(c,"remove","r8-welcomer-scene-expand"),R8.Utils.elementCSS(b,"add","r8-welcomer-collapse"),R8.Utils.elementCSS(b,"remove","r8-welcomer-expand"),
d&&(d.style.display="block"),e&&(e.style.display="none"),this.elementCardsContainer&&(this.elementCardsContainer.style.display="none"))}R8.PubSub.publish({name:this.getId(),event:this.expandedState?"R8_VIEW_EXPANDED":"R8_VIEW_COLLAPSED"})}},e.prototype.visible=function(a){a=a||{};if(void 0!=a.visible&&null!=a.visible&&(!a.visible||"R8_CLOSE"!=this.state&&"R8_HIDE"!=this.state)){var b=document.getElementById(this.getId()+"_welcomer");b&&(b.style.display=a.visible?"block":"none",a.visible&&this.addEventLog({type:"visible_impression"}));
(this.visibleState=a.visible)||this._saveState({reason:"hidden"});-1==this._loadstate&&this.visibleState&&this.reload()}},e.prototype.showScene=function(a){var b=a.callback,c=a.refresh;this.sceneContexts.currentSceneName=a.name;this.onWindowSizeChange({dimensions:{width:window.innerWidth},refresh:c,state:a.state,callback:b});this.showCounts++},e.prototype.initSceneRender_welcome=function(a){a.callback&&a.callback()},e.prototype.initScene_welcome=function(a){a.callback&&a.callback()},e.prototype.addEventLog=
function(a){var b=null,c=R8.hasValue(a.data)?a.data:{};try{"user_action"==a.type&&(a.type="behavior",a.event_type="user_action",a.event="User Action"),"behavior"==a.type?(c.event_type=a.event_type,c.event_id=a.event_id,c.event=a.event,b={type:"behavior",unique:["type","event_id","event_type"],data:c}):"visible_impression"==a.type&&(b={type:"visible_impression",unique:["type"],data:c}),b&&D(this,b)}catch(d){R8.debug(d)}},e.prototype.renderContentHandler=function(a){var b=a.variables;a=a.content;var c=
{context:{location:null}},d=c.context;try{this.currentLocations&&0<this.currentLocations.length&&(d.location=this.currentLocations[0]);d.is_mobile=this.isMobileDevice();if(b)for(var e in b)d[e]=b[e];a=R8.renderTemplate({content:a,model:c});var h;b=a;e=null;if("{"==b.substring(0,1)&&"}"==b.substring(b.length-1,b.length))try{h=e=JSON.parse(b)}catch(g){throw g;}else h={};return h}catch(g){return console.log("[Welcomer]renderContentHandler: ",g),{}}},y.definePlugin("welcomer",function(a){return new e(a)}))})(R8Plugins);